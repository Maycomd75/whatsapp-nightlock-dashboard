<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Painel NightLock â€” Controle do Bot</title> 
  
  <link rel="icon" type="image/png" href="favicon.png">

  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="panel.js" defer></script>

  <style>
/* ======================= PADRÃƒO NIGHTLOCK ======================== */

body {
    font-family: Arial, Helvetica, sans-serif;
    background: #0d1117;
    color: #e6eef6;
    padding: 20px;
    max-width: 950px;
    margin: auto;
}

h1, h2, h3, h4 {
    color: #93c5fd;
    margin-bottom: 10px;
    text-shadow: 0 0 8px #0ea5e9;
}

.card {
    background: #161b22;
    padding: 20px;
    border-radius: 14px;
    margin-bottom: 25px;
    box-shadow: 0 4px 14px rgba(0,0,0,.6);
    border: 1px solid #1e293b;
}

button {
    padding: 10px 15px;
    border: 0;
    border-radius: 6px;
    cursor: pointer;
    font-size: 15px;
    margin-right: 8px;
    font-weight: bold;
    transition: 0.2s;
}

button:hover {
    opacity: 0.82;
    transform: scale(1.05);
}

.green { background: #16a34a; color: white; }
.yellow { background: #f59e0b; color: white; }
.red { background: #ef4444; color: white; }
.blue { background: #0ea5e9; color: white; }

pre {
    background: #0a0f18;
    padding: 14px;
    border-radius: 8px;
    height: 350px;
    overflow-y: auto;
    color: #9fb7d4;
    border: 1px solid #1e293b;
    font-size: 14px;
}

#qrImg {
    max-width: 260px;
    background: white;
    padding: 10px;
    border-radius: 8px;
    margin-top: 10px;
}

#statusText {
    font-weight: bold;
    color: #38bdf8;
}

/* ======================= HEADER NEON ======================== */

.neon-center {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    margin-top: 20px;
}

.logo-icon-neon {
    width: 32px;
    height: 32px;
    filter: drop-shadow(0 0 4px #00f0ff);
}

.neon-text {
    font-size: 26px;
    font-weight: 700;
    color: #00eaff;
    text-shadow:
        0 0 4px #00eaff,
        0 0 8px #00eaff,
        0 0 14px #00eaff;
}

/* ======================= LISTAS DE GRUPO ======================== */

ul li {
    background: #0a0f18;
    padding: 8px 12px;
    border-radius: 6px;
    margin-bottom: 6px;
    border: 1px solid #1e293b;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* ======================= TELA DE LOGIN ======================== */

#loginScreen {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: #0d1117;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: #e6eef6;
    z-index: 9999;
}

.login-input {
    padding: 12px;
    margin-top: 20px;
    width: 260px;
    border-radius: 8px;
    border: 1px solid #1e293b;
    background: #161b22;
    color: #e6eef6;
    font-size: 16px;
    outline: none;
}

.login-btn {
    margin-top: 12px;
    padding: 12px 20px;
    border: 0;
    background: #00b5ff;
    color: white;
    border-radius: 8px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
}
  </style>
</head>

<body>

<!-- LOGIN -->
<div id="loginScreen">
    <img src="robot.png" width="120" style="filter: drop-shadow(0 0 8px #00eaff);">
    <h2 style="margin-top: 10px; text-shadow: 0 0 8px #00eaff;">Painel NightLock</h2>

    <input id="passwordInput" type="password" placeholder="Digite a senha" class="login-input">
    <button class="login-btn" onclick="checkPassword()">Entrar</button>

    <p id="loginError" style="color: #ef4444; margin-top: 10px; display: none;">Senha incorreta.</p>
</div>


<div id="realPanel" style="display:none;">

<div class="header-logo neon-center">
    <img src="robot.png" alt="Logo" class="logo-icon-neon">
    <span class="neon-text">Painel NightLock â€” Controle Remoto</span>
</div>

<!-- STATUS -->
<div class="card">
    <h3>Status do Bridge/Bot:</h3>
    <p id="statusText">ðŸ”„ Aguardando conexÃ£o...</p>

    <button class="green" onclick="sendCmd('start')">Iniciar bot</button>
    <button class="yellow" onclick="sendCmd('restart')">Reiniciar bot</button>
    <button class="red" onclick="sendCmd('stop')">Parar bot</button>
</div>

<!-- QR CODE -->
<div class="card">
    <h3>QR Code do WhatsApp:</h3>
    <div id="qrArea">Nenhum QR no momento.</div>
</div>

<!-- GRUPOS -->
<div class="card">
    <h3>Gerenciar Grupos</h3>

    <button class="blue" onclick="requestGroupList()">ðŸ”„ Atualizar lista de grupos</button>

    <div style="margin-top: 15px;">
      <h4>Todos os grupos detectados:</h4>
      <select id="groupSelector" style="width:100%; padding:10px; border-radius:8px; background:#0a0f18; color:#d1e3ff;">
        <option value="">Carregando lista...</option>
      </select>

      <div style="margin-top: 10px;">
        <button class="green" onclick="addAllowedGroup()">ðŸŸ© Permitir</button>
        <button class="red" onclick="addBlockedGroup()">ðŸŸ¥ Bloquear</button>
      </div>
    </div>

    <hr style="margin:20px 0; border-color:#334155;">

    <div style="display:flex; gap:20px;">
      <div style="flex:1;">
        <h4>ðŸŸ© Grupos Permitidos</h4>
        <ul id="allowedList"></ul>
      </div>

      <div style="flex:1;">
        <h4>ðŸŸ¥ Grupos Bloqueados</h4>
        <ul id="blockedList"></ul>
      </div>
    </div>
</div>

<!-- LOGS -->
<div class="card">
    <h3>Logs do Bot (tempo real)</h3>
    <pre id="logs">Aguardando logs...</pre>
</div>

</div> <!-- /realPanel -->

<script>
let lock = false;

function checkPassword() {
    if (lock) return;
    lock = true;

    const senhaCorreta = "nightlock2025"; 
    const digitada = document.getElementById("passwordInput").value;

    setTimeout(() => { lock = false; }, 1000);

    if (digitada === senhaCorreta) {
        document.getElementById("loginScreen").style.display = "none";
        document.getElementById("realPanel").style.display = "block";

        requestGroupList(); // carrega grupos automaticamente
    } else {
        document.getElementById("loginError").style.display = "block";
        document.getElementById("passwordInput").value = "";
    }
}

document.getElementById("passwordInput").addEventListener("keypress", (e) => {
    if (e.key === "Enter") checkPassword();
});
</script>

</body>
</html>
